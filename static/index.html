<!DOCTYPE html>
<!--
* _______ _
* |__   __(_)
*    | |   ___   ___   _  __ _
*    | |  | \ \ / / | | |/ _` |
*    | |  | |\ V /| |_| | (_| |
*    |_|  |_| \_/  \__,_|\__,_|
*
* Shared research blog
*
* (c)  2019  Andreas Stoeckel -  https://github.com/astoeckel/tivua
-->
<html lang="en">
	<head>
		<meta charset="UTF-8">

		<title>Tivua</title>

		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta http-equiv="Content-Security-Policy"
		      content="default-src 'self'; script-src 'self'; img-src 'self' data:; style-src 'self' 'unsafe-inline';">

		<link rel="icon" type="image/svg+xml" href="images/favicon.svg" />
		<link rel="icon" type="image/png" href="images/favicon.png" />
		<link rel="apple-touch-icon" href="images/touch-icon.png" />
		<link rel="apple-touch-icon" sizes="152x152" href="images/touch-icon-152x152.png" />
		<link rel="apple-touch-icon" sizes="180x180" href="images/touch-icon-180x180.png" />
		<link rel="apple-touch-icon" sizes="167x167" href="images/touch-icon-167x167.png" />

		<link rel="manifest" href="manifest.manifest" />

		<!-- STYLE BEGIN -->
		<link rel="stylesheet" href="styles/fonts.css" />
		<link rel="stylesheet" href="styles/tivua.css" />
		<link rel="stylesheet" href="styles/codemirror.css" />
		<link rel="stylesheet" href="styles/codemirror_tango.css" />
		<link rel="stylesheet" href="styles/katex.css" />
		<!-- STYLE END -->

		<!-- LOGIN VIEW -->
		<template id="tmpl_login_view">
			<div class="login_container">
				<main class="login">
					<div class="header">
						<img src="images/branding/logo.svg"/>
						<h1>%sign_in</h1>
						<div id="lbl_msg"></div>
					</div>
					<div class="container">
						<div id="pg_login_sel_method" class="page">
							<button id="btn_cas" class="preferred">%via_cas<span>%via_cas_descr</span></button>
							<button id="btn_username_password">%via_username_password<span>%via_username_password_descr</span></button>
							<div id="lbl_no_method"><p><strong>%error</strong></p><p>%error_msg_no_login_methods</p></div>
						</div>
						<div id="pg_login_username_password" class="page">
							<form id="frm_username_password">
								<label for="username">%username<span class="error"></span></label>
								<input id="username" type="text"/>
								<label for="password">%password<span class="error"></span></label>
								<input class="password" id="password" type="password"/>
								<input id="btn_login" type="submit" value="%login"/>
								<button id="btn_username_password_back">%back</button>
							</form>
						</div>
					</div>
					<select id="language"></select>
					<div class="copyright">%copyright_string_begin<a href="https://www.gnu.org/licenses/agpl-3.0.en.html">AGPL 3.0</a>%copyright_string_middle<a href="https://github.com/astoeckel/tivua/">https://github.com/astoeckel/tivua/</a>%copyright_string_end</div>
				</main>
			</div>
		</template>

		<!-- SEARCH BOX -->
		<template id="tmpl_searchbox">
			<div class="searchbox">
				<div class="annotations"></div>
				<div class="input">
					<span class="icon"></span>
					<input name="inp_search" spellcheck="false" placeholder="Filter by author, date, or content">
					<button name="btn_clear" class="icon" title="Clear the currently active filter"></button>
				</div>
			</div>
		</template>

		<!-- CARD VIEW -->
		<template id="tmpl_card_view">
			<header>
				<button id="btn_add" title="Add a new diary entry"><span class="icon"></span><span class="caption">Add entry</span></button>
				<div class="search"></div>
				<button id="btn_menu" class="subtle" title="%tooltip_menu"><span class="icon"></span></button>
			</header>
			<main class="cards"></main>
			<footer>
				<div id="lbl_post"></div>
				<div>
					<button id="btn_page_first" title="First page"><span class="icon"></span></button>
					<button id="btn_page_prev" title="Previous page"><span class="icon"></span></button>
					<select id="sel_page" title="Jump to page"></select>
					<button id="btn_page_next" title="Next page"><span class="icon"></span></button>
					<button id="btn_page_last" title="Last page"><span class="icon"></span></button>
				</div>
				<div>
					<select id="sel_entry_count"></select>
				</div>
			</footer>
		</template>

		<!-- MAIN VIEW - WEEK SEPARATOR -->
		<template id="tmpl_card_view_week">
			<div class="week">
				<hr/>
				<span class="week"></span>
				<hr/>
				<span class="date_from"></span>&nbsp;to&nbsp;<span class="date_to"></span>
				<hr/>
				<span class="year"></span>
				<hr/>
			</div>
		</template>

		<!-- MAIN VIEW - CARD -->
		<template id="tmpl_card_view_card">
			<div class="entry">
				<div class="meta">
					<span class="author"></span>
					<span class="date"></span>
					<button class="icon edit"></button>
				</div>
				<div class="content"></div>
				<div class="extra">
					<span class="tags"></span>
					<span class="history"></span>
				</div>
			</div>
		</template>

		<!-- MAIN VIEW - NO ENTRIES MESSAGE -->
		<template id="tmpl_card_view_welcome">
			<div class="message">
				<h1><span>üê£</span>%header_cards_welcome</h1>
				<span>%msg_cards_welcome</span>
			</div>
		</template>

		<template id="tmpl_card_view_no_results">
			<div class="message">
				<h1><span>üîç</span>%header_cards_no_results</h1>
				<span>%msg_cards_no_results</span>
			</div>
		</template>

		<!-- EDITOR VIEW -->
		<template id="tmpl_editor_view">
			<header>
				<button id="btn_back" class="subtle" title="Back to the main view"><span class="icon"></span></button>
				<h1>%header_new_entry</h1>
				<button id="btn_delete" class="subtle" title="Delete this entry"><span class="icon"></span><span class="caption">%btn_delete</span></button>
				<button id="btn_save" title="Create new entry"><span class="icon"></span><span class="caption">%btn_create_and_save</span></button>
			</header>

			<main class="editor">
				<div class="row">
					<label for="sel_author">%lbl_author<span class="error"></span></label>
					<label for="inp_date">%lbl_date<span class="error"></span></label>
				</div>
				<div class="row">
					<select id="sel_author" placeholder="%placeholder_name"></select>
					<input type="date" id="inp_date" placeholder="%placeholder_date">
				</div>
				<label for="inp_keywords">%lbl_keywords<span class="error"></span></label>
				<input id="inp_keywords" placeholder="%placeholder_keywords">
				<label for="inp_content">%lbl_content<span class="error"></span></label>
				<textarea id="inp_content"></textarea>
			</main>
		</template>

		<!-- PREFERENCES -->
		<template id="tmpl_preferences">
			<header>
				<button id="btn_back" class="subtle" title="Back to the main view"><span class="icon"></span></button>
				<h1>Preferences</h1>
				<button name="btn_save" title="%msg_done"><span class="icon"></span><span class="caption">Save changes</span></button>
			</header>

			<main class="preferences">
				<form id="frm_preferences" autocomplete="off">
					<button style="display:none"></button> <!-- Since this a form, submitting the form will trigger the "onclick" event of the first button. Add an empty button to capture this. -->
					<section name="sec_force_change_password">
						<h1>‚ö† Please enter a new password</h1>
						<p><emph>You're currently using a temporary password. Before you can continue to use Tivua, you must set a new password.</emph></p>
						<p>Please contact your administrator in case you ever forget your password.</p>
					</section>
					<section name="sec_user_details">
						<h1>User details</h1>
						<p>This section shows your login name and allows you to edit your display name.</p>
						<label for="inp_user_name"><span>Login name</span>This is the user name you use for signing into Tivua. Please contact your administrator if you would like to change your login name.</label>
						<div class="row">
							<input id="inp_user_name" tabindex="1" disabled />
						</div>
						<label for="inp_display_name"><span>Display name<span class="error"></span></span>This is how your name will be displayed to yourself and other users.</label>
						<div class="row">
							<input id="inp_display_name" tabindex="2"/>
						</div>
					</section>
					<section name="sec_password">
						<h1>Password</h1>
						<p>This section allows you to change your password. To change your password, type in your current password and confirm your new password twice.</p>
						<label for="password"><span>Current password<span class="error"></span></span>To confirm that you want to change your password, type in your current password.</label>
						<input id="inp_user_name_hidden" style="display: none" disabled />
						<div class="row password">
							<input class="password" id="password" type="password" tabindex="3" autocomplete="off"/>
							<button title="Reveal/hide password" class="hidden" tabindex="7"><span class="icon"></span></button>
						</div>
						<label for="password_new"><span>New password<span class="error"></span></span>Type in your new password. Your password must be at least eight characters long. It may contain arbitrary letters, digits, and symbols, but not whitespace.</label>
						<div class="row password">
							<input class="password" id="password_new" type="password" tabindex="4" autocomplete="new-password"/>
							<button title="Reveal/hide password" class="hidden" tabindex="8"><span class="icon"></span></button>
						</div>
						<div class="row">
							<progress id="prg_password_strength" value="0" max="100"></progress>
						</div>
						<div class="row">
							<span>Password strength:</span>
							<span id="lbl_password_strength" class="strength">No password entered</span>
						</div>
						<label for="password_new_repeat"><span>Repeat new password<span class="error"></span></span>Repeat your new password.</label>
						<div class="row password">
							<input class="password" id="password_new_repeat" type="password" tabindex="5" autocomplete="new-password"/>
							<button title="Reveal/hide password" class="hidden" tabindex="9"><span class="icon"></span></button>
						</div>
					</section>
					<section>
						<div class="buttons">
							<button name="btn_save" tabindex="6"><span class="icon"></span><span class="caption">Save changes</span></button>
						</div>
					</section>
				</form>
			</main>
		</template>

		<!-- USER EDITOR -->
		<template id="tmpl_user_manager_view">
			<header>
				<button id="btn_back" class="subtle" title="Back to the main view"><span class="icon"></span></button>
				<h1>Manage Users</h1>
				<button id="btn_add" title="Add user"><span class="icon"></span><span class="caption">Add user</span></button>
			</header>

			<main class="user_manager">
				<div class="container">
					<table>
						<thead>
							<tr>
								<th></th>
								<th><span>Name</span></th>
								<th><span>ID</span></th>
								<th class="role"><span>Role</span></th>
								<th class="auth_method"><span>Login</span></th>
								<th class="actions"></th>
							</tr>
						</thead>
						<tbody>
						</tbody>
					</table>
				</div>
			</main>
		</template>

		<template id="tmpl_user_manager_view_sep">
			<tr class="role separator">
				<td></td>
				<td colspan="5"><span name="lbl_caption"></span></td>
			</tr>
		</template>

		<template id="tmpl_user_manager_view_row">
			<tr class="user">
				<td><span class="colorcircle"></span></td>
				<td class="display_name">
					<span name="lbl_display_name"></span>
					<input name="inp_display_name" placeholder="Full name"></input>
				</td>
				<td class="id">
					<span name="lbl_name"></span>
					<input name="inp_name" placeholder="Login name"></input>
					<div class="button_container">
						<button class="clipboard" title="Copy the username to the clipboard"><span class="icon"></span></button>
					</div>
				</td>
				<td class="role">
					<select name="sel_role" value="inactive">
						<optgroup label="Suspend the user account">
							<option value="inactive">Inactive</option>
						</optgroup>
						<optgroup label="Read-only access rights">
							<option value="reader">Reader</option>
						</optgroup>
						<optgroup label="Normal access rights">
							<option value="author">Author</option>
						</optgroup>
						<optgroup label="Elevated access rights">
							<option value="admin">Admin</option>
						</optgroup>
					</select>
				</td>
				<td class="auth_method">
					<select name="sel_auth_method" value="password">
						<optgroup label="Use a username and password">
							<option value="password">Password</option>
						</optgroup>
						<optgroup label="Use centralised authentication">
							<option value="cas">CAS</option>
						</optgroup>
					</select>
					<div class="button_container">
						<button class="reset" title="Reset this user's password"><span class="icon"></span></button>
					</div>
				</td>
				<td class="actions">
					<span>&nbsp;</span>
					<div class="button_container">
						<button class="edit" title="Edit this user"><span class="icon"></span></button>
						<button class="delete" title="Delete this user"><span class="icon"></span></button>
						<button class="save" title="Save the changes to this user"><span class="icon"></span></button>
						<button class="cancel" title="Discard the changes"><span class="icon"></span></button>
					</div>
				</td>
			</tr>
		</template>

		<template id="tmpl_user_manager_view_password_reset">
			<span name="lbl_password"></span>
			<div class="button_container">
				<button class="clipboard" title="Copy the password to the clipboard"><span class="icon"></span></button>
				<button class="email" title="Compose a new email containing the username and password"><span class="icon"></span></button>
			</div>
		</template>

		<!-- GENERIC DIALOGUE -->
		<template id="tmpl_dialogue">
			<div class="dialogue">
				<h1></h1>
				<div class="message"></div>
				<div class="buttons"></div>
			</div>
		</template>

		<!-- MENU -->
		<template id="tmpl_menu">
			<div class="overlay opaque sidebar" tabindex="0">
				<div class="menu">
					<h1 class="user">
						<span class="user_name"></span>
						<span class="user_emblem" title="%lbl_menu_close"><span class="user_initials"></span></span>
					</h1>
					<div class="view_buttons">
						<button id="btn_card_view"><span class="icon"></span><span class="caption">%lbl_card_view</span></button>
						<button id="btn_list_view"><span class="icon"></span><span class="caption">%lbl_list_view</span></button>
					</div>
					<ul>
						<li><a href="#users"><span class="icon"></span><span class="caption">%lbl_menu_user_manager</span></a></li>
						<li><a href="#preferences"><span class="icon"></span><span class="caption">%lbl_menu_preferences</span></a></li>
						<li><a href="#help"><span class="icon"></span><span class="caption">%lbl_menu_help</span></a></li>
						<li><a href="#logout"><span class="icon"></span><span class="caption">%lbl_menu_logout</span></a></li>
						<li><a href="#" class="close"><span class="icon"></span><span class="caption">%lbl_menu_close</span></a></li>
					</ul>
				</div>
			</div>
		</template>

	</head>
	<body>
		<!-- LOADING SCREEN -->
		<div class="loading">
			<!-- Download all font variants ahead of time -->
			<span style="-webkit-user-select: none; opacity: 0.1; font-size: 1pt; color: white;">
				<span style="font-weight: normal; font-style: normal;">a√§Œ±ƒÄ</span>
				<span style="font-weight: bold; font-style: normal;">a√§Œ±ƒÄ</span>
				<span style="font-weight: normal; font-style: italic;">a√§Œ±ƒÄ</span>
				<span style="font-weight: bold; font-style: italic;">a√§Œ±ƒÄ</span>
				<span class="icon">&#xF002;</span>
			</span>

			<!-- Display the animated logo -->
			<svg width="40.88mm" height="40.88mm" version="1.1" viewBox="0 0 40.88 40.88" xmlns="http://www.w3.org/2000/svg">
				<g transform="translate(-30.49 -21.45)">
					<g transform="translate(-54.07 13.23)">
						<rect x="86.56" y="10.22" width="36.88" height="36.88" ry="6" fill="#75507b"></rect>
						<g transform="translate(79.2)">
							<path d="m22.49 16.54v7.938l-7.938 15.88h22.49l-7.938-15.88v-7.938l1.058 4.3e-5h-8.731z" fill="none" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
							<path d="m18.52 32.42h14.55l3.969 7.937h-22.49z" fill="#fff"></path>
							<g class="bubbles">
								<circle cx="23.13" cy="36.93" r="2.835" fill="#75507b"></circle>
								<circle cx="27.73" cy="29.87" r="1.819" fill="#fff"></circle>
								<circle cx="28.84" cy="34.99" r="1.677" fill="#75507b"></circle>
							</g>
						</g>
					</g>
				</g>
			</svg>

			<div class="copyright">Tivua. ¬© 2019, Andreas St√∂ckel. Licensed under the <a href="https://www.gnu.org/licenses/agpl-3.0.en.html">AGPL 3.0</a>. Report bugs at <a href="https://github.com/astoeckel/tivua/">https://github.com/astoeckel/tivua/</a>.</div>
		</div>

		<noscript>
			<form action="index.html" method="GET">
			<div class="overlay opaque">
				<div class="dialogue">
					<h1><span>ü§ñ&nbsp;</span>Please enable JavaScript</h1>
					<div class="message">Unfortunately, <i>Tivua</i> needs JavaScript to work properly. Please enable JavaScript in your browser and try again.</div>
					<div class="buttons">
						<button class="btn_reload"><span class="icon"></span><span class="caption">Reload</span></button>
					</div>
				</div>
			</div>
			</form>
		</noscript>

		<!-- SCRIPT STUB BEGIN -->
		<script src="data/data.js"></script>
		<script src="scripts/xhr_stub.js"></script>
		<!-- SCRIPT STUB END -->
		<!-- SCRIPT BEGIN -->
		<script src="extern/codemirror.js"></script>
		<script src="extern/codemirror_markdown.js"></script>
		<script src="extern/codemirror_spell_checker.js"></script>
		<script src="extern/sjcl.js"></script>
		<script src="extern/stemmer.js"></script>
		<script src="extern/typo.js"></script>
		<script src="extern/tagger.js"></script>
		<script src="extern/auto-complete.js"></script>
		<script src="extern/markdown-it.js"></script>
		<script src="extern/katex.js"></script>
		<script src="scripts/utils.js"></script>
		<script src="l10n/l10n_data.js"></script>
		<script src="scripts/render.js"></script>
		<script src="scripts/filter.js"></script>
		<script src="scripts/colors.js"></script>
		<script src="scripts/time.js"></script>
		<script src="scripts/xhr.js"></script>
		<script src="scripts/api.js"></script>
		<script src="scripts/view/components/searchbox.js"></script>
		<script src="scripts/view/cards.js"></script>
		<script src="scripts/view/editor.js"></script>
		<script src="scripts/view/login.js"></script>
		<script src="scripts/view/menu.js"></script>
		<script src="scripts/view/preferences.js"></script>
		<script src="scripts/view/users.js"></script>
		<script src="scripts/view/utils.js"></script>
		<script src="scripts/main.js"></script>
		<!-- SCRIPT END -->
	</body>
</html>
